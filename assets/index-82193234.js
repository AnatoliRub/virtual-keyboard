var y=Object.defineProperty;var g=(a,e,t)=>e in a?y(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t;var l=(a,e,t)=>(g(a,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=t(i);fetch(i.href,r)}})();class d{constructor(){this.observers=[]}subscribe(e){this.observers.push(e)}unsubscribe(e){this.observers=this.observers.filter(t=>t!==e)}broadcast(e){this.observers.forEach(t=>t(e))}}const h=(a="div",e=[],t=[])=>{const s=document.createElement(a);return e.length&&s.classList.add(...e),t.length&&t.forEach(i=>s.setAttribute(i[0],i[1])),s},c=(a,e)=>{a.appendChild(e)};class m{constructor(e){l(this,"mdButtons",["Backspace","Tab","Delete","CapsLock","ShiftLeft"]);l(this,"xlButtons",["Enter","ShiftRight"]);l(this,"key");l(this,"subtitle");l(this,"title");this.small=e.small,this.shift=e.shift,this.code=e.code,this.createKey()}get Key(){return this.key}highlightKey(){this.key.classList.add("highlight")}hideKey(){this.key.classList.remove("highlight")}createKey(){const e=h("div",["key-subtitle"]),t=h("div",["key-title"]);t.setAttribute("data-code",this.code);const s=h("div",["key-wrapper"]);this.key=h("button",["key"]),e.innerHTML=this.shift,t.innerHTML=this.small,c(s,e),c(s,t),c(this.key,s),this.setSizeButton(),this.setSpecialClasses(),this.subtitle=e,this.title=t}setSpecialClasses(){if(this.code.match(/[0-9]/)){this.key.classList.add("key-number");return}if(this.code.match(/Del|Backsp|Tab|Caps|ShiftL|ShiftR|Enter|Contr|Win|Alt|ArrowRight|ArrowLeft|ArrowDown|ArrowUp/)){this.key.classList.add("key-func");return}this.key.classList.add("key-letter")}setSizeButton(){this.mdButtons.includes(this.code)&&this.key.classList.add("button-md"),this.xlButtons.includes(this.code)&&this.key.classList.add("button-xl"),this.code==="Space"&&this.key.classList.add("button-xxl")}updateKey(e){this.small=e.small,this.shift=e.shift,this.code=e.code,this.subtitle.innerHTML=this.shift,this.title.innerHTML=this.small}}class S{constructor(){l(this,"lang",this.setLanguage())}isSupportedLanguage(e){return e==="en"||e==="ru"}getLanguageLocalStorage(){return localStorage.getItem("lang")}setLanguageLocalStorage(e){localStorage.setItem("lang",e)}toggleLanguage(){this.lang=this.lang==="en"?"ru":"en",this.setLanguageLocalStorage(this.lang)}setLanguage(){const e=this.getLanguageLocalStorage();return!e||!this.isSupportedLanguage(e)?(this.setLanguageLocalStorage("en"),"en"):e}}const b=new S,k=[{small:"ё",shift:"Ё",code:"Backquote"},{small:"1",shift:"!",code:"Digit1"},{small:"2",shift:'"',code:"Digit2"},{small:"3",shift:"№",code:"Digit3"},{small:"4",shift:";",code:"Digit4"},{small:"5",shift:"%",code:"Digit5"},{small:"6",shift:":",code:"Digit6"},{small:"7",shift:"?",code:"Digit7"},{small:"8",shift:"*",code:"Digit8"},{small:"9",shift:"(",code:"Digit9"},{small:"0",shift:")",code:"Digit0"},{small:"-",shift:"_",code:"Minus"},{small:"=",shift:"+",code:"Equal"},{small:"\\",shift:"/",code:"Backslash"},{small:"Backspace",shift:null,code:"Backspace"},{small:"Tab",shift:null,code:"Tab"},{small:"й",shift:"Й",code:"KeyQ"},{small:"ц",shift:"Ц",code:"KeyW"},{small:"у",shift:"У",code:"KeyE"},{small:"к",shift:"К",code:"KeyR"},{small:"е",shift:"Е",code:"KeyT"},{small:"н",shift:"Н",code:"KeyY"},{small:"г",shift:"Г",code:"KeyU"},{small:"ш",shift:"Ш",code:"KeyI"},{small:"щ",shift:"Щ",code:"KeyO"},{small:"з",shift:"З",code:"KeyP"},{small:"х",shift:"Х",code:"BracketLeft"},{small:"ъ",shift:"Ъ",code:"BracketRight"},{small:"Delete",shift:null,code:"Delete"},{small:"CapsLock",shift:null,code:"CapsLock"},{small:"ф",shift:"Ф",code:"KeyA"},{small:"ы",shift:"Ы",code:"KeyS"},{small:"в",shift:"В",code:"KeyD"},{small:"а",shift:"А",code:"KeyF"},{small:"п",shift:"П",code:"KeyG"},{small:"р",shift:"Р",code:"KeyH"},{small:"о",shift:"О",code:"KeyJ"},{small:"л",shift:"Л",code:"KeyK"},{small:"д",shift:"Д",code:"KeyL"},{small:"ж",shift:"Ж",code:"Semicolon"},{small:"э",shift:"Э",code:"Quote"},{small:"Enter",shift:null,code:"Enter"},{small:"Shift",shift:null,code:"ShiftLeft"},{small:"я",shift:"Я",code:"KeyZ"},{small:"ч",shift:"Ч",code:"KeyX"},{small:"с",shift:"С",code:"KeyC"},{small:"м",shift:"М",code:"KeyV"},{small:"и",shift:"И",code:"KeyB"},{small:"т",shift:"Т",code:"KeyN"},{small:"ь",shift:"Ь",code:"KeyM"},{small:"б",shift:"Б",code:"Comma"},{small:"ю",shift:"Ю",code:"Period"},{small:".",shift:",",code:"Slash"},{small:"▲",shift:null,code:"ArrowUp"},{small:"Shift",shift:null,code:"ShiftRight"},{small:"Ctrl",shift:null,code:"ControlLeft"},{small:"Win",shift:null,code:"Win"},{small:"Alt",shift:null,code:"AltLeft"},{small:" ",shift:null,code:"Space"},{small:"Alt",shift:null,code:"AltRight"},{small:"◄",shift:null,code:"ArrowLeft"},{small:"▼",shift:null,code:"ArrowDown"},{small:"►",shift:null,code:"ArrowRight"},{small:"Win",shift:null,code:"Win"},{small:"Ctrl",shift:null,code:"ControlRight"}],v=[{small:"`",shift:"~",code:"Backquote"},{small:"1",shift:"!",code:"Digit1"},{small:"2",shift:"@",code:"Digit2"},{small:"3",shift:"#",code:"Digit3"},{small:"4",shift:"$",code:"Digit4"},{small:"5",shift:"%",code:"Digit5"},{small:"6",shift:"^",code:"Digit6"},{small:"7",shift:"&",code:"Digit7"},{small:"8",shift:"*",code:"Digit8"},{small:"9",shift:"(",code:"Digit9"},{small:"0",shift:")",code:"Digit0"},{small:"-",shift:"_",code:"Minus"},{small:"=",shift:"+",code:"Equal"},{small:"\\",shift:"|",code:"Backslash"},{small:"Backspace",shift:null,code:"Backspace"},{small:"Tab",shift:null,code:"Tab"},{small:"q",shift:"Q",code:"KeyQ"},{small:"w",shift:"W",code:"KeyW"},{small:"e",shift:"E",code:"KeyE"},{small:"r",shift:"R",code:"KeyR"},{small:"t",shift:"T",code:"KeyT"},{small:"y",shift:"Y",code:"KeyY"},{small:"u",shift:"U",code:"KeyU"},{small:"i",shift:"I",code:"KeyI"},{small:"o",shift:"O",code:"KeyO"},{small:"p",shift:"P",code:"KeyP"},{small:"[",shift:"{",code:"BracketLeft"},{small:"]",shift:"}",code:"BracketRight"},{small:"Delete",shift:null,code:"Delete"},{small:"CapsLock",shift:null,code:"CapsLock"},{small:"a",shift:"A",code:"KeyA"},{small:"s",shift:"S",code:"KeyS"},{small:"d",shift:"D",code:"KeyD"},{small:"f",shift:"F",code:"KeyF"},{small:"g",shift:"G",code:"KeyG"},{small:"h",shift:"H",code:"KeyH"},{small:"j",shift:"J",code:"KeyJ"},{small:"k",shift:"K",code:"KeyK"},{small:"l",shift:"L",code:"KeyL"},{small:";",shift:":",code:"Semicolon"},{small:"’",shift:"”",code:"Quote"},{small:"Enter",shift:null,code:"Enter"},{small:"Shift",shift:null,code:"ShiftLeft"},{small:"z",shift:"Z",code:"KeyZ"},{small:"x",shift:"X",code:"KeyX"},{small:"c",shift:"C",code:"KeyC"},{small:"v",shift:"V",code:"KeyV"},{small:"b",shift:"B",code:"KeyB"},{small:"n",shift:"N",code:"KeyN"},{small:"m",shift:"M",code:"KeyM"},{small:",",shift:"<",code:"Comma"},{small:".",shift:">",code:"Period"},{small:"/",shift:"?",code:"Slash"},{small:"▲",shift:null,code:"ArrowUp"},{small:"Shift",shift:null,code:"ShiftRight"},{small:"Ctrl",shift:null,code:"ControlLeft"},{small:"Win",shift:null,code:"Win"},{small:"Alt",shift:null,code:"AltLeft"},{small:" ",shift:null,code:"Space"},{small:"Alt",shift:null,code:"AltRight"},{small:"◄",shift:null,code:"ArrowLeft"},{small:"▼",shift:null,code:"ArrowDown"},{small:"►",shift:null,code:"ArrowRight"},{small:"Win",shift:null,code:"Win"},{small:"Ctrl",shift:null,code:"ControlRight"}],p={ru:k,en:v};class L{constructor(){l(this,"keyLayers",p);l(this,"keyboard",h("div",["keyboard-container"]));l(this,"keydownObserver",new d);l(this,"keyupObserver",new d);l(this,"mouseDownObserver",new d);l(this,"mouseUpObserver",new d);this.languageService=b,this.keyLayer=this.LanguageLayer.map(e=>new m(e))}get LanguageLayer(){return this.keyLayers[this.languageService.lang]}toggleLayer(){this.languageService.toggleLanguage();const e=this.LanguageLayer;this.keyLayer=this.keyLayer.map((t,s)=>(t.updateKey(e[s]),t))}rotateKeys(){this.keyboard.classList.toggle("rotate")}highlightKeyNew(e){const t=this.keyLayer.find(s=>s.code===e);t&&setTimeout(()=>t.highlightKey(),0)}hideHighlightNew(e){const t=this.keyLayer.find(s=>s.code===e);t&&setTimeout(()=>t.hideKey(),0)}}const f=new L;class K{constructor(){l(this,"textAreaEl",h("textarea",["keyboard-textarea"],[["placeholder",`This keyboard was created on Windows!
Shift + Alt - language switching 
Click here and start. ^.^,`]]));l(this,"funcKeys",["ShiftLeft","ShiftRight","Backspace","Tab","ArrowLeft","ArrowRight","ArrowUp","ArrowDown","AltLeft","AltRight","Delete","CapsLock","ControlLeft","ControlRight","Win"]);l(this,"isShift",!1);l(this,"isCapsLock",!1);l(this,"isAlt",!1);l(this,"prevValue","");this.textAreaEl.focus()}getCursorPosition(e){const t=this.textAreaEl.selectionStart,s=e(t);this.textAreaEl.setSelectionRange(s,s),this.textAreaEl.focus()}shiftKeyHandler(){this.isShift=!this.isShift}capsLockKeyHandler(){this.isCapsLock=!this.isCapsLock}arrowLeftKeyHandler(){this.getCursorPosition(e=>e-1>=0?e-1:0),this.textAreaEl.focus()}altKeyHandler(){this.isAlt=!this.isAlt}arrowRightKeyHandler(){this.getCursorPosition(e=>e+1)}deleteKeyHandler(){this.getCursorPosition(e=>(this.textAreaEl.textContent=this.textAreaEl.textContent.slice(0,e)+this.textAreaEl.textContent.slice(e+1),e))}tabKeyHandler(){this.getCursorPosition(e=>{const t=this.textAreaEl.textContent.slice(0,e),s=this.textAreaEl.textContent.slice(e);return this.textAreaEl.textContent=`${t}	${s}`,e+1})}backspaceKeyHandler(){this.getCursorPosition(e=>(this.textAreaEl.textContent=this.textAreaEl.textContent.slice(0,e-1)+this.textAreaEl.textContent.slice(e),e-1))}spaceKeyHandler(){this.getCursorPosition(e=>{const t=this.textAreaEl.textContent.slice(0,e),s=this.textAreaEl.textContent.slice(e);return this.textAreaEl.textContent=`${t} ${s}`,e+1})}enterKeyHandler(){this.getCursorPosition(e=>{const t=this.textAreaEl.textContent.slice(0,e),s=this.textAreaEl.textContent.slice(e);return this.textAreaEl.textContent=`${t}
${s}`,e+1})}inputSymbolHandler(e,t){const s=this.isShift&&this.isCapsLock||!this.isShift&&!this.isCapsLock?"small":"shift";if(!t.find(o=>e===o.code))return;const r=t.find(o=>e===o.code)[s];this.getCursorPosition(o=>{const n=this.textAreaEl.textContent.slice(0,o),u=this.textAreaEl.textContent.slice(o);return this.textAreaEl.textContent=`${n}${r}${u}`,o+1}),this.textAreaEl.focus()}arrowUpKeyHandler(){this.getCursorPosition(e=>{const t=this.textAreaEl.textContent.split(`
`),s=t.reduce((i,r,o)=>(i.col+r.length+o<e&&(i.col+=r.length,i.ind=o),i),{col:0,ind:0});if(s.col!==0){const i=e-s.col-s.ind;return t[s.ind].length<i?s.col+s.ind:s.col+s.ind-t[s.ind].length+i-1}return e})}arrowDownKeyHandler(){this.getCursorPosition(e=>{const t=this.textAreaEl.textContent.split(`
`),s=t.reduce((r,o,n)=>(r.col+o.length+n<=e&&(r.col+=o.length,r.ind=n+1),r),{col:0,ind:0}),i=e-s.col+s.ind-t[s.ind].length;return t[s.ind].length-i+s.ind+1})}}const A=new K;class w{constructor(){this.screenService=A,this.keyboardService=f,this.textAreaEl=this.screenService.textAreaEl,this.keyboardService.keydownObserver.subscribe(this.keyDownHandler.bind(this)),this.keyboardService.keyupObserver.subscribe(this.keyUpHandler.bind(this)),this.keyboardService.mouseDownObserver.subscribe(this.mouseDownHandler.bind(this)),this.keyboardService.mouseUpObserver.subscribe(this.mouseUpHandler.bind(this))}get TextArea(){return this.textAreaEl}getCode(e){return e.target.classList.contains("key-title")?e.target.getAttribute("data-code"):e.target.classList.contains("key-subtitle")?e.target.nextSibling.getAttribute("data-code"):e.target.classList.contains("key")?e.srcElement.childNodes[0].childNodes[1].getAttribute("data-code"):e.target.classList.contains("key-wrapper")?e.srcElement.lastChild.getAttribute("data-code"):""}funcKeysHandler(e){if(this.screenService.prevValue=e,e==="AltLeft"||e==="AltRight"){this.screenService.altKeyHandler(),this.screenService.isShift&&(this.keyboardService.toggleLayer(),this.keyboardService.hideHighlightNew(e),this.keyboardService.hideHighlightNew(this.screenService.prevValue));return}if(e==="Enter"){this.screenService.enterKeyHandler();return}if(e==="Space"){this.screenService.spaceKeyHandler();return}if(e==="Delete"){this.screenService.deleteKeyHandler();return}if(e==="Backspace"){this.screenService.backspaceKeyHandler();return}if(e==="Tab"){this.screenService.tabKeyHandler();return}if(e==="ArrowLeft"){this.screenService.arrowLeftKeyHandler();return}if(e==="ArrowRight"){this.screenService.arrowRightKeyHandler();return}if(e==="ArrowUp"){this.screenService.arrowUpKeyHandler();return}if(e==="ArrowDown"){this.screenService.arrowDownKeyHandler();return}if(e==="CapsLock"){this.screenService.capsLockKeyHandler(),this.keyboardService.highlightKeyNew(e),this.keyboardService.rotateKeys();return}this.screenService.funcKeys.includes(e)||this.screenService.inputSymbolHandler(e,this.keyboardService.keyLayer)}keyDownHandler(e){if(!((e.code==="ShiftLeft"||e.code==="ShiftRight")&&this.screenService.prevValue==="ShiftLeft"||this.screenService.prevValue==="ShiftRight")){if((e.code==="ShiftLeft"||e.code==="ShiftRight")&&this.screenService.prevValue!=="ShiftLeft"&&this.screenService.prevValue!=="ShiftRight"){this.screenService.isShift=!this.screenService.isShift,this.keyboardService.rotateKeys(),this.screenService.prevValue=e.code,this.keyboardService.highlightKeyNew(e.code);return}e.preventDefault(),this.funcKeysHandler(e.code),this.keyboardService.highlightKeyNew(e.code)}}keyUpHandler(e){if(e.preventDefault(),e.code==="CapsLock"&&this.screenService.isCapsLock){this.keyboardService.hideHighlightNew(e.code);return}if(e.code==="ShiftLeft"||e.code==="ShiftRight"&&e.type!=="mouseout"){this.screenService.isShift=!this.screenService.isShift,this.keyboardService.rotateKeys(),this.keyboardService.hideHighlightNew(e.code),this.screenService.prevValue="";return}e.code!=="CapsLock"&&this.keyboardService.hideHighlightNew(e.code)}mouseDownHandler(e){const t=this.getCode(e);if(t==="ShiftLeft"||t==="ShiftRight"){this.screenService.shiftKeyHandler(),this.keyboardService.highlightKeyNew(t),this.keyboardService.rotateKeys(),this.screenService.isAlt&&(this.keyboardService.toggleLayer(),this.keyboardService.hideHighlightNew(t),this.keyboardService.hideHighlightNew(this.screenService.prevValue));return}this.funcKeysHandler(t),this.keyboardService.highlightKeyNew(t)}mouseUpHandler(e){const t=this.getCode(e);t==="CapsLock"&&this.screenService.isCapsLock||t==="ShiftLeft"&&this.screenService.isShift||t==="ShiftLeft"&&this.screenService.isShift||t==="AltLeft"&&this.screenService.isAlt||t==="AltLeft"&&this.screenService.isAlt||this.keyboardService.hideHighlightNew(t)}}class C{constructor(){this.keyboardService=f,this.keyboard=f.keyboard,this.keyboardService.keyLayer.forEach(e=>c(this.keyboard,e.Key)),document.addEventListener("keydown",e=>{e.preventDefault(),this.keyboardService.keydownObserver.broadcast(e)}),document.addEventListener("keyup",e=>{this.keyboardService.keyupObserver.broadcast(e)}),this.keyboard.addEventListener("mousedown",e=>{this.keyboardService.mouseDownObserver.broadcast(e)}),this.keyboard.addEventListener("mouseout",e=>{this.keyboardService.mouseUpObserver.broadcast(e)}),this.keyboard.addEventListener("mouseup",e=>{this.keyboardService.mouseUpObserver.broadcast(e)})}get Keyboard(){return this.keyboard}}class x{constructor(){l(this,"root",h("main",["root"],[["id","root"]]));l(this,"screen",new w);l(this,"keyboard",new C)}bootstrap(){c(document.body,this.root),c(this.root,this.screen.TextArea),c(this.root,this.keyboard.Keyboard)}}const E=new x;E.bootstrap();
